{%- comment -%}
  Course Materials Page
  
  A minimal, Apple-inspired layout for displaying course content.
  Uses the modular _teaching.scss design system.
{%- endcomment -%}

{%- assign course_data = site.data.teaching | where: "course_id", page.course_id | first -%}

<div class="course-wrapper">
  <div class="container-md py-4">

    <!-- Course Header -->
    <header class="course-header fade-in">
      <p class="course-header__desc t-body">{{ course_data.description }}</p>
      
      <div class="course-header__meta cluster cluster--sm">
        {%- if course_data.instructor -%}
        <span class="pill pill--accent">
          <i class="fas fa-user"></i>
          {{ course_data.instructor }}
        </span>
        {%- endif -%}
        
        {%- if course_data.semester -%}
        <span class="pill pill--muted">
          <i class="fas fa-calendar"></i>
          {{ course_data.semester }}
        </span>
        {%- endif -%}
        
        {%- if course_data.hosts and course_data.hosts.size > 0 -%}
        <span class="pill pill--muted">
          <i class="fas fa-home"></i>
          Hosts: {{ course_data.hosts | join: ", " }}
        </span>
        {%- endif -%}
        
        {%- if course_data.teaching_assistants and course_data.teaching_assistants.size > 0 -%}
        <span class="pill pill--muted">
          <i class="fas fa-users"></i>
          TAs: {{ course_data.teaching_assistants | join: ", " }}
        </span>
        {%- endif -%}
      </div>
    </header>

    <!-- Instructor Bio Section -->
    {%- if course_data.instructor_bio or course_data.instructor_photo -%}
    <section class="content-section fade-in">
      <div class="section-label">
        <div class="section-label__icon">
          <i class="fas fa-chalkboard-teacher"></i>
        </div>
        <span class="section-label__text">About the Instructor</span>
      </div>

      <div class="minimal-card minimal-card--elevated">
        <div class="instructor-profile">
          {%- if course_data.instructor_photo -%}
          <div class="instructor-profile__photo">
            {% include figure.liquid path=course_data.instructor_photo alt=course_data.instructor class="img-fluid rounded shadow" %}
            {%- if course_data.instructor -%}
            <h4 class="instructor-profile__name">{{ course_data.instructor }}</h4>
            {%- endif -%}
            {%- if course_data.instructor_links -%}
            <div class="instructor-profile__links" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.75rem; justify-content: center;">
              {%- if course_data.instructor_links.homepage -%}
              <a href="{{ course_data.instructor_links.homepage }}" target="_blank" rel="noopener noreferrer" class="btn btn-outline-primary btn-sm" title="Homepage">
                <i class="fas fa-home"></i>
              </a>
              {%- endif -%}
              {%- if course_data.instructor_links.google_scholar -%}
              <a href="{{ course_data.instructor_links.google_scholar }}" target="_blank" rel="noopener noreferrer" class="btn btn-outline-primary btn-sm" title="Google Scholar">
                <i class="ai ai-google-scholar"></i>
              </a>
              {%- endif -%}
              {%- if course_data.instructor_links.dblp -%}
              <a href="{{ course_data.instructor_links.dblp }}" target="_blank" rel="noopener noreferrer" class="btn btn-outline-primary btn-sm" title="DBLP">
                <i class="ai ai-dblp"></i>
              </a>
              {%- endif -%}
              {%- if course_data.instructor_links.linkedin -%}
              <a href="{{ course_data.instructor_links.linkedin }}" target="_blank" rel="noopener noreferrer" class="btn btn-outline-primary btn-sm" title="LinkedIn">
                <i class="fab fa-linkedin"></i>
              </a>
              {%- endif -%}
            </div>
            {%- endif -%}
          </div>
          {%- endif -%}
          {%- if course_data.instructor_bio -%}
          <div class="instructor-profile__bio t-body">
            {{ course_data.instructor_bio }}
          </div>
          {%- endif -%}
        </div>
      </div>
    </section>
    {%- endif -%}

    <!-- Schedule Section -->
    {%- if page.schedule -%}
    <section class="content-section fade-in">
      <div class="section-label">
        <div class="section-label__icon">
          <i class="fas fa-clock"></i>
        </div>
        <span class="section-label__text">Schedule</span>
      </div>

      <div class="minimal-card minimal-card--elevated">
        <!-- Logistics Grid -->
        <div class="logistics-grid">
          {%- if page.schedule.dates_time -%}
          <div class="logistics-item">
            <span class="logistics-item__label t-overline">Date & Time</span>
            <span class="logistics-item__value t-body">{{ page.schedule.dates_time }}</span>
          </div>
          {%- endif -%}
          
          {%- if page.schedule.classroom -%}
          <div class="logistics-item">
            <span class="logistics-item__label t-overline">Classroom</span>
            <span class="logistics-item__value t-body">{{ page.schedule.classroom }}</span>
          </div>
          {%- endif -%}
          
          {%- if page.schedule.duration -%}
          <div class="logistics-item">
            <span class="logistics-item__label t-overline">Duration</span>
            <span class="logistics-item__value t-body">{{ page.schedule.duration }}</span>
          </div>
          {%- endif -%}
        </div>

        <!-- Schedule Table -->
        {%- if page.schedule_details -%}
        <div class="schedule-table-wrapper">
          <table class="schedule-table">
            <thead>
              <tr>
                <th>No.</th>
                <th>Date</th>
                <th>Topic / Venue</th>
              </tr>
            </thead>
            <tbody>
              {%- for session in page.schedule_details -%}
              <tr>
                <td><span class="lecture-num">#{{ session.lecture }}</span></td>
                <td>{{ session.date }}</td>
                <td>{{ session.venue }}</td>
              </tr>
              {%- endfor -%}
            </tbody>
          </table>
        </div>
        {%- endif -%}
      </div>
    </section>
    {%- endif -%}

    <!-- Lectures Section -->
    {%- if page.lectures and page.lectures.size > 0 -%}
    <section class="content-section fade-in">
      <div class="section-label">
        <div class="section-label__icon section-label__icon--blue">
          <i class="fas fa-book-open"></i>
        </div>
        <span class="section-label__text">Lectures</span>
      </div>

      <div class="teaching-grid teaching-grid--materials">
        {%- for lecture in page.lectures -%}
        <article class="material-card material-card--lecture minimal-card">
          <div class="material-card__content">
            <h4 class="material-card__title t-title">{{ lecture.title }}</h4>
            {%- if lecture.description -%}
            <p class="material-card__desc t-body">{{ lecture.description }}</p>
            {%- endif -%}
          </div>
          
          <div class="material-card__actions">
            {%- if lecture.slides -%}
            <a href="{{ lecture.slides }}" class="btn-minimal btn-minimal--ghost" target="_blank">
              <i class="fas fa-desktop"></i> Slides
            </a>
            {%- endif -%}
            {%- if lecture.video -%}
            <a href="{{ lecture.video }}" class="btn-minimal btn-minimal--ghost" target="_blank">
              <i class="fas fa-play"></i> Video
            </a>
            {%- endif -%}
            {%- if lecture.notes -%}
            <a href="{{ lecture.notes }}" class="btn-minimal btn-minimal--ghost" target="_blank">
              <i class="fas fa-sticky-note"></i> Notes
            </a>
            {%- endif -%}
          </div>
        </article>
        {%- endfor -%}
      </div>
    </section>
    {%- endif -%}

    <!-- Assignments Section -->
    {%- if page.assignments and page.assignments.size > 0 -%}
    <section class="content-section fade-in">
      <div class="section-label">
        <div class="section-label__icon section-label__icon--green">
          <i class="fas fa-pencil-ruler"></i>
        </div>
        <span class="section-label__text">Assignments</span>
      </div>

      <div class="teaching-grid teaching-grid--materials">
        {%- for assignment in page.assignments -%}
        <article class="material-card material-card--assignment minimal-card">
          <div class="material-card__content">
            <h4 class="material-card__title t-title">{{ assignment.title }}</h4>
            {%- if assignment.description -%}
            <p class="material-card__desc t-body">{{ assignment.description }}</p>
            {%- endif -%}
            {%- if assignment.due_date -%}
            <div class="material-card__due">
              <i class="far fa-clock"></i>
              Due: {{ assignment.due_date }}
            </div>
            {%- endif -%}
          </div>
          
          <div class="material-card__actions">
            {%- if assignment.pdf -%}
            <a href="{{ assignment.pdf }}" class="btn-minimal btn-minimal--subtle" target="_blank">
              <i class="far fa-file-pdf"></i> PDF
            </a>
            {%- endif -%}
            {%- if assignment.solution -%}
            <a href="{{ assignment.solution }}" class="btn-minimal btn-minimal--ghost" target="_blank">
              <i class="fas fa-check"></i> Solution
            </a>
            {%- endif -%}
          </div>
        </article>
        {%- endfor -%}
      </div>
    </section>
    {%- endif -%}

    <!-- Resources Section -->
    {%- if page.resources and page.resources.size > 0 -%}
    <section class="content-section fade-in">
      <div class="section-label">
        <div class="section-label__icon section-label__icon--purple">
          <i class="fas fa-layer-group"></i>
        </div>
        <span class="section-label__text">Resources</span>
      </div>

      <div class="teaching-grid teaching-grid--materials">
        {%- for resource in page.resources -%}
        <article class="material-card material-card--resource minimal-card">
          <div class="material-card__content">
            <h4 class="material-card__title t-title">{{ resource.title }}</h4>
            {%- if resource.description -%}
            <p class="material-card__desc t-body">{{ resource.description }}</p>
            {%- endif -%}
          </div>
          
          <div class="material-card__actions">
            <a href="{{ resource.url }}" class="btn-minimal btn-minimal--primary" target="_blank">
              <i class="fas fa-external-link-alt"></i> Open Resource
            </a>
          </div>
        </article>
        {%- endfor -%}
      </div>
    </section>
    {%- endif -%}

    <!-- Empty State -->
    {%- unless page.lectures or page.assignments or page.resources -%}
    <section class="empty-state fade-in">
      <div class="empty-state__icon">
        <i class="fas fa-book-open"></i>
      </div>
      <h4 class="empty-state__title t-title">Materials Coming Soon</h4>
      <p class="empty-state__desc t-body">Lecture slides, assignments, and resources will be posted here throughout the semester.</p>
    </section>
    {%- endunless -%}

    <!-- Back Navigation -->
    <nav class="course-nav">
      <a href="/teaching/" class="btn-minimal btn-minimal--ghost">
        <i class="fas fa-arrow-left"></i>
        Back to All Courses
      </a>
    </nav>

  </div>
</div>