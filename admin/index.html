<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Manager</title>

    <!-- 1. PREVENT AUTO-INIT -->
    <script>
        window.CMS_MANUAL_INIT = true;
    </script>

    <!-- 2. LOAD SVELTIA CMS -->
    <script src="https://unpkg.com/@sveltia/cms/dist/sveltia-cms.js"></script>
</head>

<body>
    <!-- 3. CONFIGURATION -->
    <script>
        // --- Shared Field Definitions ---
        const commonPersonFields = [
            { label: "Layout", name: "layout", widget: "hidden", default: "person" },
            { label: "Title", name: "title", widget: "string" },
            { label: "First Name", name: "firstname", widget: "string" },
            { label: "Last Name", name: "lastname", widget: "string" },
            { label: "Description", name: "description", widget: "string" },
            { label: "Image", name: "img", widget: "image", required: false },
            { label: "Website", name: "website", widget: "string", required: false },
            { label: "ORCID ID", name: "orcid_id", widget: "string", required: false },
            { label: "LinkedIn", name: "linkedin_username", widget: "string", required: false },
            { label: "GitHub", name: "github_username", widget: "string", required: false },
            { label: "Email", name: "email", widget: "string", required: false },
            { label: "Scholar User ID", name: "scholar_userid", widget: "string", required: false },
            { label: "Twitter", name: "twitter_username", widget: "string", required: false },
            { label: "Badges", name: "badges", widget: "list", required: false },
            { label: "Show", name: "show", widget: "boolean", default: true },
            { label: "Biography Paragraphs", name: "biography_paragraphs", widget: "list", required: false },
            { label: "Show Academic Roles", name: "show_academic_roles", widget: "boolean", default: false },
            { label: "Academic Roles", name: "academic_roles", widget: "list", required: false },
            { label: "Show Awards", name: "show_awards", widget: "boolean", default: false },
            { label: "Awards", name: "awards", widget: "list", required: false },
            { label: "Show Visiting Positions", name: "show_visiting_positions", widget: "boolean", default: false },
            { label: "Visiting Positions", name: "visiting_positions", widget: "list", required: false, fields: [{ label: "Institution", name: "institution", widget: "string" }, { label: "Dates", name: "dates", widget: "string" }, { label: "Hosts", name: "hosts", widget: "string" }] },
            { label: "Show Activities", name: "show_activities", widget: "boolean", default: false }
        ];

        const commonAlumniFields = [
            ...commonPersonFields,
            { label: "Year", name: "year", widget: "number" }
        ];

        const commonTalkFields = [
            { label: "Layout", name: "layout", widget: "hidden", default: "talk" },
            { label: "Title", name: "title", widget: "string" },
            { label: "Date", name: "date", widget: "datetime", date_format: "YYYY-MM-DD", time_format: false },
            { label: "Time", name: "time", widget: "string", required: false, hint: "e.g., 2:30 PM or 14:30-16:00" },
            { label: "Venue", name: "venue", widget: "string", required: false },
            { label: "Venue Link", name: "venue_link", widget: "string", required: false, hint: "URL to venue website or map" },
            { label: "Collaboration", name: "collaboration", widget: "string", required: false, hint: "Name of collaborating organization" },
            { label: "Collaboration Link", name: "collaboration_link", widget: "string", required: false, hint: "URL to collaborator website" },
            { label: "Keywords", name: "keywords", widget: "list", required: false },
            { label: "Abstract", name: "abstract", widget: "text", required: false },
        ];

        // --- Main Configuration ---
        const config = {
            load_config_file: false,
            backend: {
                name: "github",
                repo: "spectrum-lab-iisc/spectrum-lab-iisc.github.io",
                branch: "main",
                base_url: "https://sveltia-cms-auth.vercel.app"
            },
            media_folder: "assets/img",
            public_folder: "/assets/img",

            // NOTE: 'collections_groups' is NOT a standard property in Sveltia/Decap.
            // I have removed it to prevent confusion.
            // Instead, we rely on 'icon' property to visually group items.

            collections: [
                // --- GENERAL ---
                {
                    name: "news",
                    label: "News",
                    icon: "newspaper", // Material Symbol Name
                    folder: "_news",
                    create: true,
                    nested: { depth: 2, summary: "{{title}}" },
                    slug: "{{year}}-{{month}}-{{day}}-{{slug}}",
                    path: "{{fields.date | date('YYYY')}}/{{slug}}",
                    summary: "{{title}} ({{date | date('YYYY-MM-DD')}})",
                    sortable_fields: ["title", "date"],
                    view_groups: [
                        { label: "Year", field: "date", pattern: "\\d{4}", default: true }
                    ],
                    fields: [
                        { label: "Layout", name: "layout", widget: "hidden", default: "post" },
                        { label: "Title", name: "title", widget: "string" },
                        { label: "Posted Date", name: "date", widget: "datetime", hint: "Date when news was published" },
                        { label: "Event Date", name: "event_date", widget: "datetime", required: false, hint: "Date when the event occurs (optional, for events/talks)" },
                        { label: "Inline", name: "inline", widget: "boolean", default: false, required: false },
                        { label: "Related Posts", name: "related_posts", widget: "boolean", default: false, required: false },
                        { label: "Announce", name: "announce", widget: "boolean", default: false, required: false },
                        { label: "Badge", name: "badge", widget: "string", required: false },
                        { label: "Icon", name: "icon", widget: "string", required: false },
                        { label: "Link", name: "link", widget: "string", required: false },
                        { label: "Venue", name: "venue", widget: "string", required: false },
                        { label: "Host", name: "host", widget: "string", required: false },
                        { label: "Body", name: "body", widget: "markdown" }
                    ]
                },

                // --- PEOPLE (Icon: group) ---
                {
                    name: "lab_director",
                    label: "People: Lab Director",
                    icon: "group",
                    folder: "_people/current/lab-director",
                    media_folder: "/assets/img/people/current/lab-director",
                    create: true,
                    fields: [
                        ...commonPersonFields,
                        { label: "Category", name: "category", widget: "hidden", default: "Lab Director" },
                        { label: "GitHub", name: "github", widget: "string", required: false }
                    ]
                },
                {
                    name: "phd_students",
                    label: "People: PhD Students",
                    icon: "group",
                    folder: "_people/current/phd-students",
                    media_folder: "/assets/img/people/current/phd-students",
                    create: true,
                    fields: [
                        ...commonPersonFields,
                        { label: "Category", name: "category", widget: "hidden", default: "PhD Students" }
                    ]
                },
                {
                    name: "mtech_students",
                    label: "People: MTech Students",
                    icon: "group",
                    folder: "_people/current/mtech-students",
                    media_folder: "/assets/img/people/current/mtech-students",
                    create: true,
                    fields: [
                        ...commonPersonFields,
                        { label: "Category", name: "category", widget: "hidden", default: "M.Tech Students" },
                        { label: "Year", name: "year", widget: "number" }
                    ]
                },
                {
                    name: "mtech_research",
                    label: "People: MTech (Research)",
                    icon: "group",
                    folder: "_people/current/mtech-research",
                    media_folder: "/assets/img/people/current/mtech-research",
                    create: true,
                    fields: [
                        ...commonPersonFields,
                        { label: "Category", name: "category", widget: "hidden", default: "M.Tech (Research) Students" }
                    ]
                },
                {
                    name: "project_associates",
                    label: "People: Project Associates",
                    icon: "group",
                    folder: "_people/current/project-associates",
                    media_folder: "/assets/img/people/current/project-associates",
                    create: true,
                    fields: [
                        ...commonPersonFields,
                        { label: "Category", name: "category", widget: "hidden", default: "Project Associates" }
                    ]
                },
                {
                    name: "administrator",
                    label: "People: Administrator",
                    icon: "group",
                    folder: "_people/current/administrator",
                    media_folder: "/assets/img/people/current/administrator",
                    create: true,
                    fields: [
                        ...commonPersonFields,
                        { label: "Category", name: "category", widget: "hidden", default: "Administrator" }
                    ]
                },

                // --- ALUMNI (Icon: school) ---
                {
                    name: "phd_graduates",
                    label: "Alumni: PhD Graduates",
                    icon: "school",
                    folder: "_people/alumni/phd-graduates",
                    media_folder: "/assets/img/people/alumni/phd-graduates",
                    create: true,
                    slug: "{{slug}}",
                    path: "{{fields.year}}/{{slug}}",
                    fields: [
                        ...commonAlumniFields,
                        { label: "Category", name: "category", widget: "hidden", default: "PhD Graduates" }
                    ]
                },
                {
                    name: "mtech_graduates",
                    label: "Alumni: MTech Graduates",
                    icon: "school",
                    folder: "_people/alumni/mtech-graduates",
                    media_folder: "/assets/img/people/alumni/mtech-graduates",
                    create: true,
                    slug: "{{slug}}",
                    path: "{{fields.year}}/{{slug}}",
                    fields: [
                        ...commonAlumniFields,
                        { label: "Category", name: "category", widget: "hidden", default: "M.Tech Graduates" }
                    ]
                },
                {
                    name: "mtech_research_graduates",
                    label: "Alumni: MTech (Research) Graduates",
                    icon: "school",
                    folder: "_people/alumni/mtech-research-graduates",
                    media_folder: "/assets/img/people/alumni/mtech-research-graduates",
                    create: true,
                    slug: "{{slug}}",
                    path: "{{fields.year}}/{{slug}}",
                    fields: [
                        ...commonAlumniFields,
                        { label: "Category", name: "category", widget: "hidden", default: "M.Tech (Research) Graduates" }
                    ]
                },
                {
                    name: "interns",
                    label: "Alumni: Interns",
                    icon: "school",
                    folder: "_people/alumni/interns",
                    media_folder: "/assets/img/people/alumni/interns",
                    create: true,
                    slug: "{{slug}}",
                    path: "{{fields.year}}/{{slug}}",
                    fields: [
                        ...commonAlumniFields,
                        { label: "Category", name: "category", widget: "hidden", default: "Interns" },

                    ]
                },
                {
                    name: "post_doc",
                    label: "Alumni: Post Docs",
                    icon: "school",
                    folder: "_people/alumni/post-doc",
                    media_folder: "/assets/img/people/alumni/post-doc",
                    create: true,
                    slug: "{{slug}}",
                    path: "{{fields.year}}/{{slug}}",
                    fields: [
                        ...commonAlumniFields,
                        { label: "Category", name: "category", widget: "hidden", default: "Post Docs" }
                    ]
                },
                {
                    name: "research_associates",
                    label: "Alumni: Research Associates",
                    icon: "school",
                    folder: "_people/alumni/research-associates",
                    media_folder: "/assets/img/people/alumni/research-associates",
                    create: true,
                    slug: "{{slug}}",
                    path: "{{fields.year}}/{{slug}}",
                    fields: [
                        ...commonAlumniFields,
                        { label: "Category", name: "category", widget: "hidden", default: "Research Associates" }
                    ]
                },

                // --- TALKS (Icon: mic) ---
                {
                    name: "talks_delivered",
                    label: "Talks: Delivered",
                    icon: "mic",
                    folder: "_talks/delivered",
                    create: true,
                    nested: { depth: 2, summary: "{{title}}" },
                    slug: "{{year}}-{{month}}-{{day}}-{{slug}}",
                    path: "{{fields.date | date('YYYY')}}/{{slug}}",
                    summary: "{{title}} ({{date | date('YYYY-MM-DD')}})",
                    sortable_fields: ["title", "date"],
                    view_groups: [
                        { label: "Year", field: "date", pattern: "\\d{4}", default: true }
                    ],
                    fields: [
                        ...commonTalkFields,
                        { label: "Type", name: "type", widget: "select", options: ["Talk", "Conference Talk", "Keynote", "Invited Talk", "Plenary Talk", "Tutorial", "Workshop", "Seminar", "Guest Lecture", "Panel Discussion", "Webinar", "Other"], default: "Talk" },
                        { label: "Category", name: "category", widget: "hidden", default: "delivered" },
                        { label: "Speaker", name: "speaker", widget: "string", required: false },
                        { label: "Speaker Affiliation", name: "speaker_affiliation", widget: "string", required: false },
                        { label: "Host", name: "host", widget: "string", required: false },
                        { label: "Speaker Bio", name: "speaker_bio", widget: "text", required: false }
                    ]
                },
                {
                    name: "talks_organized",
                    label: "Talks: Organized",
                    icon: "mic",
                    folder: "_talks/organized",
                    create: true,
                    nested: { depth: 2, summary: "{{title}}" },
                    slug: "{{year}}-{{month}}-{{day}}-{{slug}}",
                    path: "{{fields.date | date('YYYY')}}/{{slug}}",
                    summary: "{{title}} ({{date | date('YYYY-MM-DD')}})",
                    sortable_fields: ["title", "date"],
                    view_groups: [
                        { label: "Year", field: "date", pattern: "\\d{4}", default: true }
                    ],
                    fields: [
                        ...commonTalkFields,
                        { label: "Type", name: "type", widget: "select", options: ["PhD Thesis Colloquium", "PhD Thesis Defense", "MSc Thesis Defense", "MTech Thesis Defense", "Comprehensive Exam", "Research Seminar", "Lab Meeting", "Journal Club", "Guest Seminar", "Other"], default: "PhD Thesis Colloquium" },
                        { label: "Category", name: "category", widget: "hidden", default: "organized" },
                        { label: "Candidate", name: "candidate", widget: "string", required: false },
                        { label: "Supervisor", name: "supervisor", widget: "string", required: false },
                        { label: "Candidate Bio", name: "candidate_bio", widget: "text", required: false }
                    ]
                },



                // --- FUNDING (Icon: attach_money) ---
                {
                    name: "funding",
                    label: "Funding",
                    icon: "attach_money",
                    files: [
                        {
                            name: "funders",
                            label: "Edit Funders & Projects",
                            file: "_data/funding.yml",
                            media_folder: "/assets/img/funders",
                            fields: [
                                {
                                    label: "Funders",
                                    name: "funders",
                                    widget: "list",
                                    fields: [
                                        { label: "Name", name: "name", widget: "string" },
                                        { label: "Logo", name: "logo", widget: "image" },
                                        { label: "URL", name: "url", widget: "string", required: false },
                                        { label: "Invert", name: "invert", widget: "boolean", default: false }
                                    ]
                                },
                                {
                                    label: "Projects",
                                    name: "projects",
                                    widget: "list",
                                    fields: [
                                        { label: "Title", name: "title", widget: "string" },
                                        { label: "Agency", name: "agency", widget: "string" },
                                        { label: "Role", name: "role", widget: "select", options: ["PI", "Co-PI"], default: "PI" },
                                        { label: "Amount", name: "amount", widget: "string" },
                                        { label: "Duration", name: "duration", widget: "string" },
                                        { label: "Investigators", name: "investigators", widget: "string", required: false }
                                    ]
                                }
                            ]
                        }
                    ]
                },

                // --- RECOGNITION (Icon: emoji_events) ---
                {
                    name: "recognition",
                    label: "Recognition",
                    icon: "emoji_events",
                    files: [
                        {
                            name: "awards",
                            label: "Edit Awards",
                            file: "_data/recognition.yml",
                            media_folder: "/assets/img/recognition",
                            fields: [
                                {
                                    label: "Awards",
                                    name: "awards",
                                    widget: "list",
                                    fields: [
                                        { label: "Award Name", name: "award", widget: "string" },
                                        { label: "Year", name: "year", widget: "string", required: false },
                                        { label: "Category", name: "category", widget: "select", options: ["Award", "Recognition"], default: "Award" },
                                        { label: "Recipients", name: "recipients", widget: "string", hint: "Comma-separated list of names" },
                                        { label: "Image", name: "image", widget: "image", required: false },
                                        { label: "Images", name: "images", widget: "list", required: false, fields: [{ label: "Path", name: "path", widget: "image" }, { label: "Caption", name: "caption", widget: "string" }] },
                                        { label: "Co-inventors", name: "co_inventors", widget: "string", required: false }
                                    ]
                                }
                            ]
                        }
                    ]
                },

                // --- GALLERY (Icon: photo_library) ---
                {
                    name: "gallery",
                    label: "Gallery",
                    icon: "photo_library",
                    files: [
                        {
                            name: "gallery",
                            label: "Edit Photo Albums",
                            file: "_data/gallery.yml",
                            media_folder: "/assets/img/gallery/album",
                            fields: [
                                {
                                    label: "Albums",
                                    name: "albums",
                                    widget: "list",
                                    fields: [
                                        { label: "Event", name: "event", widget: "string", required: false },
                                        { label: "Folder", name: "folder", widget: "string", required: false },
                                        { label: "Description", name: "description", widget: "string", required: false },
                                        {
                                            label: "Photos",
                                            name: "photos",
                                            widget: "list",
                                            fields: [
                                                { label: "Image", name: "image", widget: "image" },
                                                { label: "Caption", name: "caption", widget: "string", required: false },
                                                { label: "Order", name: "order", widget: "number", required: false }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            name: "videos",
                            label: "Edit Videos",
                            file: "_data/videos.yml",
                            media_folder: "/assets/img/gallery/video-thumbnails",
                            fields: [
                                {
                                    label: "Videos",
                                    name: "videos",
                                    widget: "list",
                                    fields: [
                                        { label: "Title", name: "title", widget: "string" },
                                        { label: "Speaker", name: "speaker", widget: "string", required: false },
                                        { label: "Description", name: "description", widget: "text", required: false },
                                        { label: "Date", name: "date", widget: "datetime", date_format: "YYYY-MM-DD", time_format: false },
                                        { label: "Video URL", name: "url", widget: "string", hint: "YouTube, Vimeo, or other video URL" },
                                        { label: "Category", name: "category", widget: "select", options: ["Research Talks", "Tutorials", "Lab Activities", "Conferences", "Workshops", "Other"], default: "Research Talks" },
                                        { label: "Custom Thumbnail", name: "thumbnail", widget: "image", required: false, hint: "Optional - auto-extracted from YouTube if not provided" }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // --- COURSES (Icon: book) ---
                {
                    name: "courses",
                    label: "Courses",
                    icon: "book",
                    files: [
                        {
                            name: "course_list",
                            label: "Edit Course List",
                            file: "_data/teaching.yml",
                            media_folder: "/assets/img/teaching/instructors",
                            fields: [
                                {
                                    label: "Courses",
                                    name: "courses",
                                    widget: "list",
                                    fields: [
                                        { label: "Title", name: "title", widget: "string" },
                                        { label: "Description", name: "description", widget: "text" },
                                        { label: "Instructor", name: "instructor", widget: "string" },
                                        { label: "Instructor Bio", name: "instructor_bio", widget: "text", required: false },
                                        { label: "Instructor Photo", name: "instructor_photo", widget: "image", required: false, media_folder: "/assets/img/teaching/instructors" },
                                        { label: "Teaching Assistants", name: "teaching_assistants", widget: "list", required: false },
                                        { label: "Hosts", name: "hosts", widget: "list", required: false },
                                        { label: "Semester", name: "semester", widget: "string" },
                                        { label: "Permalink", name: "permalink", widget: "string" },
                                        { label: "Course ID", name: "course_id", widget: "string" },
                                        { label: "Type", name: "type", widget: "select", options: ["Regular Course", "Short Course"], default: "Regular Course" },
                                        { label: "Instructor Links", name: "instructor_links", widget: "object", required: false, fields: [{ label: "Homepage", name: "homepage", widget: "string", required: false }, { label: "Google Scholar", name: "google_scholar", widget: "string", required: false }, { label: "LinkedIn", name: "linkedin", widget: "string", required: false }] }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // Course Pages
                {
                    name: "course_pages",
                    label: "Course Pages",
                    icon: "book",
                    folder: "_pages/teaching",
                    media_folder: "/assets/teaching/{{course_id}}",
                    create: true,
                    nested: { depth: 2, summary: "{{title}}" },
                    slug: "{{slug}}",
                    fields: [
                        { label: "Layout", name: "layout", widget: "hidden", default: "page" },
                        { label: "Title", name: "title", widget: "string" },
                        { label: "Permalink", name: "permalink", widget: "string" },
                        { label: "Description", name: "description", widget: "string", required: false },
                        { label: "Type", name: "type", widget: "select", options: ["Regular Course", "Short Course"], default: "Regular Course" },
                        { label: "Course ID", name: "course_id", widget: "string" },
                        { label: "Nav", name: "nav", widget: "boolean", default: false },
                        { label: "Parent Course", name: "parent_course", widget: "string", required: false, hint: "Permalink of the parent course (e.g., /teaching/mathematics-bigdata-analytics/)" },
                        { label: "Teaching Assistants", name: "teaching_assistants", widget: "list", required: false },
                        { label: "Schedule", name: "schedule", widget: "object", required: false, fields: [{ label: "Dates & Time", name: "dates_time", widget: "string" }, { label: "Classroom", name: "classroom", widget: "string" }, { label: "Duration", name: "duration", widget: "string" }, { label: "Meeting Link", name: "meeting_link", widget: "string", required: false }] },
                        { label: "News", name: "news", widget: "list", required: false, fields: [{ label: "Title", name: "title", widget: "string" }, { label: "Date", name: "date", widget: "string" }, { label: "Description", name: "description", widget: "string" }] },
                        { label: "Modules", name: "modules", widget: "list", required: false, fields: [{ label: "Title", name: "title", widget: "string" }, { label: "Description", name: "description", widget: "text" }, { label: "Lectures", name: "lectures", widget: "string" }, { label: "Status", name: "status", widget: "select", options: ["Upcoming", "In Progress", "Completed"], default: "Upcoming" }, { label: "Link", name: "link", widget: "string" }] },
                        { label: "Lectures", name: "lectures", widget: "list", required: false, fields: [{ label: "Title", name: "title", widget: "string" }, { label: "Slides", name: "slides", widget: "file", required: false, media_folder: "/assets/teaching/{{course_id}}" }, { label: "Description", name: "description", widget: "string", required: false }, { label: "Video", name: "video", widget: "string", required: false }, { label: "Notes", name: "notes", widget: "file", required: false, media_folder: "/assets/teaching/{{course_id}}" }] },
                        { label: "Assignments", name: "assignments", widget: "list", required: false, fields: [{ label: "Title", name: "title", widget: "string" }, { label: "Description", name: "description", widget: "string", required: false }, { label: "PDF", name: "pdf", widget: "file", required: false, media_folder: "/assets/teaching/{{course_id}}" }, { label: "Solution", name: "solution", widget: "file", required: false, media_folder: "/assets/teaching/{{course_id}}" }, { label: "Due Date", name: "due_date", widget: "string", required: false }] },
                        { label: "Resources", name: "resources", widget: "list", required: false, fields: [{ label: "Title", name: "title", widget: "string" }, { label: "URL", name: "url", widget: "string", required: false }, { label: "Description", name: "description", widget: "string", required: false }] },
                        { label: "Body", name: "body", widget: "markdown", required: false }
                    ]
                }
            ]
        };

        const CMS_APP = window.SveltiaCMS || window.CMS;
        if (CMS_APP) {
            CMS_APP.init({ config });
            console.log('Sveltia CMS Initialized Manually');

            // Register preview styles from the website
            CMS_APP.registerPreviewStyle('/assets/css/main.css');
            CMS_APP.registerPreviewStyle('https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css');
            CMS_APP.registerPreviewStyle('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

            // Custom preview styles for better readability
            CMS_APP.registerPreviewStyle(`
                body {
                    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    padding: 2rem;
                    max-width: 800px;
                    margin: 0 auto;
                    line-height: 1.6;
                    color: #333;
                }
                h1, h2, h3, h4, h5, h6 {
                    color: #1a1a2e;
                    margin-top: 1.5rem;
                    margin-bottom: 0.5rem;
                }
                .post-title, .talk-title {
                    font-size: 2rem;
                    font-weight: 700;
                    color: #1a1a2e;
                    margin-bottom: 0.5rem;
                }
                .post-meta {
                    color: #666;
                    font-size: 0.9rem;
                    margin-bottom: 1.5rem;
                    padding-bottom: 1rem;
                    border-bottom: 1px solid #eee;
                }
                .post-content {
                    font-size: 1rem;
                }
                .badge, .talk-badge {
                    display: inline-block;
                    padding: 0.35rem 1rem;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    border-radius: 20px;
                    font-size: 0.85rem;
                    font-weight: 600;
                    margin-bottom: 1rem;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                }
                /* Talk Page Styles */
                .talk-page {
                    padding: 1.5rem;
                }
                .talk-header {
                    margin-bottom: 2rem;
                }
                .talk-meta {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 1.5rem;
                    margin-top: 1rem;
                    color: #666;
                }
                .talk-meta-item {
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                }
                .talk-meta-item i {
                    color: #667eea;
                    width: 20px;
                }
                .talk-keywords {
                    margin-top: 1rem;
                    display: flex;
                    flex-wrap: wrap;
                    gap: 0.5rem;
                }
                .talk-keyword {
                    background: #f0f4ff;
                    color: #4361ee;
                    padding: 0.25rem 0.75rem;
                    border-radius: 15px;
                    font-size: 0.85rem;
                }
                .talk-section {
                    margin-top: 2rem;
                    padding-top: 1rem;
                    border-top: 1px solid #eee;
                }
                .talk-section h2 {
                    font-size: 1.25rem;
                    color: #333;
                    margin-bottom: 1rem;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                }
                .talk-section h2 i {
                    color: #667eea;
                }
                .talk-speaker-card {
                    background: #f8f9fa;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    border-left: 4px solid #667eea;
                }
                .speaker-affiliation {
                    color: #666;
                    font-size: 0.9rem;
                }
                .talk-abstract, .talk-bio {
                    line-height: 1.7;
                    color: #444;
                }
                /* Person Page Styles */
                .initials-avatar {
                    width: 150px;
                    height: 150px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 3rem;
                    font-weight: 600;
                    margin: 0 auto;
                }
                .social-icons {
                    margin-top: 1rem;
                }
                .social-icon {
                    display: inline-flex;
                    align-items: center;
                    justify-content: center;
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    background: #f0f4ff;
                    color: #667eea;
                    transition: all 0.3s ease;
                    text-decoration: none;
                }
                .social-icon:hover {
                    background: #667eea;
                    color: white;
                    transform: translateY(-2px);
                }
                .card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
                }
                .card-body {
                    padding: 1.5rem;
                }
                .card-title {
                    font-weight: 600;
                    color: #333;
                    margin-bottom: 1rem;
                }
                .card-text {
                    color: #555;
                    line-height: 1.7;
                }
                img {
                    max-width: 100%;
                    height: auto;
                    border-radius: 8px;
                }
                blockquote {
                    border-left: 4px solid #4361ee;
                    padding-left: 1rem;
                    margin-left: 0;
                    color: #555;
                    font-style: italic;
                }
                code {
                    background: #f4f4f4;
                    padding: 0.2rem 0.4rem;
                    border-radius: 4px;
                    font-size: 0.9em;
                }
                pre {
                    background: #1a1a2e;
                    color: #f8f8f2;
                    padding: 1rem;
                    border-radius: 8px;
                    overflow-x: auto;
                }
                pre code {
                    background: none;
                    padding: 0;
                }
            `, { raw: true });

            // News Preview Template (matches post.liquid)
            const NewsPreview = ({ entry, widgetFor }) => {
                const title = entry.getIn(['data', 'title']) || 'Untitled';
                const date = entry.getIn(['data', 'date']);
                const badge = entry.getIn(['data', 'badge']);
                const author = entry.getIn(['data', 'author']);
                const body = widgetFor('body');

                return window.h('div', { className: 'post' },
                    window.h('header', { className: 'post-header' },
                        window.h('h1', { className: 'post-title' }, title),
                        window.h('p', { className: 'post-meta' },
                            'Created in ',
                            date && new Date(date).toLocaleDateString('en-US', {
                                year: 'numeric', month: 'long', day: 'numeric'
                            }),
                            author && window.h('span', {}, ' by ', author)
                        ),
                        window.h('p', { className: 'post-tags' },
                            window.h('i', { className: 'fa-solid fa-calendar fa-sm' }),
                            ' ', date && new Date(date).getFullYear(),
                            badge && window.h('span', { className: 'badge ms-2' }, badge)
                        )
                    ),
                    window.h('article', { className: 'post-content' },
                        window.h('div', { id: 'markdown-content' }, body)
                    )
                );
            };

            // Talk Preview Template (matches talk.liquid)
            const TalkPreview = ({ entry, widgetFor }) => {
                const title = entry.getIn(['data', 'title']) || 'Untitled';
                const date = entry.getIn(['data', 'date']);
                const time = entry.getIn(['data', 'time']);
                const venue = entry.getIn(['data', 'venue']);
                const venueLink = entry.getIn(['data', 'venue_link']);
                const speaker = entry.getIn(['data', 'speaker']);
                const speakerAffiliation = entry.getIn(['data', 'speaker_affiliation']);
                const candidate = entry.getIn(['data', 'candidate']);
                const supervisor = entry.getIn(['data', 'supervisor']);
                const type = entry.getIn(['data', 'type']);
                const abstract = entry.getIn(['data', 'abstract']);
                const speakerBio = entry.getIn(['data', 'speaker_bio']);
                const candidateBio = entry.getIn(['data', 'candidate_bio']);
                const keywords = entry.getIn(['data', 'keywords']);
                const host = entry.getIn(['data', 'host']);
                const collaboration = entry.getIn(['data', 'collaboration']);

                return window.h('div', { className: 'talk-page' },
                    // Header
                    window.h('header', { className: 'talk-header' },
                        type && window.h('span', { className: 'talk-badge' }, type),
                        window.h('h1', { className: 'talk-title' }, title),
                        window.h('div', { className: 'talk-meta' },
                            window.h('div', { className: 'talk-meta-item' },
                                window.h('i', { className: 'fas fa-calendar-alt' }),
                                window.h('span', {}, date && new Date(date).toLocaleDateString('en-US', {
                                    year: 'numeric', month: 'long', day: 'numeric'
                                }))
                            ),
                            time && window.h('div', { className: 'talk-meta-item' },
                                window.h('i', { className: 'fas fa-clock' }),
                                window.h('span', {}, time)
                            ),
                            venue && window.h('div', { className: 'talk-meta-item' },
                                window.h('i', { className: 'fas fa-map-marker-alt' }),
                                venueLink
                                    ? window.h('a', { href: venueLink, target: '_blank' }, venue)
                                    : window.h('span', {}, venue)
                            ),
                            collaboration && window.h('div', { className: 'talk-meta-item' },
                                window.h('i', { className: 'fas fa-handshake' }),
                                window.h('span', {}, collaboration)
                            )
                        ),
                        keywords && keywords.size > 0 && window.h('div', { className: 'talk-keywords' },
                            keywords.map(k => window.h('span', { className: 'talk-keyword' }, k))
                        )
                    ),
                    // Speaker section
                    speaker && window.h('section', { className: 'talk-section' },
                        window.h('h2', {},
                            window.h('i', { className: 'fas fa-user-tie' }),
                            ' Speaker'
                        ),
                        window.h('div', { className: 'talk-speaker-card' },
                            window.h('strong', {}, speaker),
                            speakerAffiliation && window.h('span', { className: 'speaker-affiliation' },
                                window.h('br'), speakerAffiliation
                            )
                        )
                    ),
                    // Candidate section (for organized talks)
                    candidate && window.h('section', { className: 'talk-section' },
                        window.h('h2', {},
                            window.h('i', { className: 'fas fa-user-graduate' }),
                            ' Candidate'
                        ),
                        window.h('div', { className: 'talk-speaker-card' },
                            window.h('strong', {}, candidate),
                            supervisor && window.h('span', { className: 'speaker-affiliation' },
                                window.h('br'), 'Supervisor: ', supervisor
                            )
                        )
                    ),
                    // Host section
                    host && window.h('section', { className: 'talk-section' },
                        window.h('h2', {},
                            window.h('i', { className: 'fas fa-user-friends' }),
                            ' Host'
                        ),
                        window.h('p', {}, host)
                    ),
                    // Abstract section
                    abstract && window.h('section', { className: 'talk-section' },
                        window.h('h2', {},
                            window.h('i', { className: 'fas fa-file-alt' }),
                            ' Abstract'
                        ),
                        window.h('div', { className: 'talk-abstract' }, abstract)
                    ),
                    // Speaker Bio
                    speakerBio && window.h('section', { className: 'talk-section' },
                        window.h('h2', {},
                            window.h('i', { className: 'fas fa-info-circle' }),
                            ' About the Speaker'
                        ),
                        window.h('div', { className: 'talk-bio' }, speakerBio)
                    ),
                    // Candidate Bio
                    candidateBio && window.h('section', { className: 'talk-section' },
                        window.h('h2', {},
                            window.h('i', { className: 'fas fa-info-circle' }),
                            ' About the Candidate'
                        ),
                        window.h('div', { className: 'talk-bio' }, candidateBio)
                    )
                );
            };

            // Person Preview Template (matches person.liquid)
            const PersonPreview = ({ entry, widgetFor }) => {
                const firstname = entry.getIn(['data', 'firstname']) || '';
                const lastname = entry.getIn(['data', 'lastname']) || '';
                const description = entry.getIn(['data', 'description']);
                const img = entry.getIn(['data', 'img']);
                const email = entry.getIn(['data', 'email']);
                const website = entry.getIn(['data', 'website']);
                const linkedin = entry.getIn(['data', 'linkedin_username']);
                const github = entry.getIn(['data', 'github_username']) || entry.getIn(['data', 'github']);
                const scholar = entry.getIn(['data', 'scholar_userid']);
                const orcid = entry.getIn(['data', 'orcid_id']);
                const twitter = entry.getIn(['data', 'twitter_username']);
                const bioParagraphs = entry.getIn(['data', 'biography_paragraphs']);
                const academicRoles = entry.getIn(['data', 'academic_roles']);
                const showAcademicRoles = entry.getIn(['data', 'show_academic_roles']);
                const awards = entry.getIn(['data', 'awards']);
                const showAwards = entry.getIn(['data', 'show_awards']);
                const body = widgetFor('body');

                const initials = (firstname.charAt(0) + lastname.charAt(0)).toUpperCase();

                return window.h('div', { className: 'container my-5' },
                    window.h('div', { className: 'row' },
                        // Left column: Image and Contact
                        window.h('div', { className: 'col-md-4 text-center' },
                            img
                                ? window.h('img', { src: img, alt: firstname, className: 'img-fluid rounded shadow mb-3', style: { maxHeight: '300px' } })
                                : window.h('div', { className: 'initials-avatar shadow mb-3' }, initials),
                            window.h('h1', { className: 'mt-3' }, firstname, ' ', lastname),
                            window.h('p', { className: 'text-muted mb-2' }, description),
                            // Social Icons
                            window.h('div', { className: 'd-flex flex-wrap justify-content-center gap-3 mt-3 social-icons' },
                                email && window.h('a', { href: 'mailto:' + email, title: 'Email', className: 'social-icon' },
                                    window.h('i', { className: 'fas fa-envelope fa-lg' })
                                ),
                                orcid && window.h('a', { href: 'https://orcid.org/' + orcid, title: 'ORCID', className: 'social-icon' },
                                    window.h('i', { className: 'ai ai-orcid ai-lg' })
                                ),
                                scholar && window.h('a', { href: 'https://scholar.google.com/citations?user=' + scholar, title: 'Google Scholar', className: 'social-icon' },
                                    window.h('i', { className: 'ai ai-google-scholar ai-lg' })
                                ),
                                linkedin && window.h('a', { href: 'https://linkedin.com/in/' + linkedin, title: 'LinkedIn', className: 'social-icon' },
                                    window.h('i', { className: 'fab fa-linkedin fa-lg' })
                                ),
                                github && window.h('a', { href: 'https://github.com/' + github, title: 'GitHub', className: 'social-icon' },
                                    window.h('i', { className: 'fab fa-github fa-lg' })
                                ),
                                twitter && window.h('a', { href: 'https://twitter.com/' + twitter, title: 'Twitter', className: 'social-icon' },
                                    window.h('i', { className: 'fab fa-twitter fa-lg' })
                                ),
                                website && window.h('a', { href: website, title: 'Website', className: 'social-icon' },
                                    window.h('i', { className: 'fas fa-globe fa-lg' })
                                )
                            )
                        ),
                        // Right column: Biography
                        window.h('div', { className: 'col-md-8' },
                            window.h('div', { className: 'card shadow-sm border-0 mb-4' },
                                window.h('div', { className: 'card-body' },
                                    window.h('h5', { className: 'card-title' }, 'Biography'),
                                    bioParagraphs && bioParagraphs.size > 0
                                        ? bioParagraphs.map(p => window.h('p', { className: 'card-text' }, p))
                                        : body,
                                    showAcademicRoles && academicRoles && academicRoles.size > 0 && window.h('div', {},
                                        window.h('h6', { className: 'mt-4' }, 'Academic and Editorial Roles'),
                                        window.h('ul', {},
                                            academicRoles.map(role => window.h('li', {}, role))
                                        )
                                    ),
                                    showAwards && awards && awards.size > 0 && window.h('div', {},
                                        window.h('h6', { className: 'mt-4' }, 'Awards'),
                                        window.h('ul', {},
                                            awards.map(award => window.h('li', {}, award))
                                        )
                                    )
                                )
                            )
                        )
                    )
                );
            };

            // Register preview templates
            CMS_APP.registerPreviewTemplate('news', NewsPreview);
            CMS_APP.registerPreviewTemplate('talks_delivered', TalkPreview);
            CMS_APP.registerPreviewTemplate('talks_organized', TalkPreview);
            // Register person previews for all people collections
            ['lab_director', 'phd_students', 'mtech_students', 'mtech_research', 'project_associates', 'administrator',
                'phd_graduates', 'mtech_graduates', 'mtech_research_graduates', 'interns', 'post_doc', 'research_associates'
            ].forEach(collection => CMS_APP.registerPreviewTemplate(collection, PersonPreview));

        } else {
            console.error('Sveltia CMS global object not found. Ensure the UMD script is loaded.');
        }
    </script>
</body>

</html>